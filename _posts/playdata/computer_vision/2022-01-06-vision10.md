---
laout : single
title: "영상의 기하하적 변환"
excerpt : "어파인 변환, 투시 변환"
categories :
- Computer Vision
tags :
- [Playdata , Python, OpenCV, Computer Vision]
toc: true #Table of contents 옆에 목록이 생성됨
toc_sticky: true #toc가 화면을 따라 내려옴
toc_label: 목차 #toc 상단에 써있는 제목

date: 2022-01-06
last_modified_at: 2022-01-06
---

## 어파인 변환

어파인 변환은 영상의 평행 이동, 확대 및 축소, 회전 등의 조합을 만들 수 있는 기하하적 변환을 나타냄

```
In :  src = cv2.imread('./data/tekapo.bmp')

      rows = src.shape[0] # height
      cols = src.shape[1] # width

      src_pts = np.array([[0,0],[cols-1,0],[cols-1,rows-1]]).astype(np.float32)
      dts_pts = np.array([[50,50],[cols-100,100],[cols-50,rows-50]]).astype(np.float32)

      M = cv2.getAffineTransform(src_pts, dts_pts) # 입력영상 3좌표 , 출력영상 3좌표
      dst = cv2.warpAffine(src, M, (0,0))

      cv2.imshow('src',src)
      cv2.imshow('dst',dst)
      cv2.waitKey()
      cv2.destroyAllWindows()
```
<div style="text-align:center;">
<img src="/assets/post_photo/opencv/어파인.jpg" width="40%">
<br />
<b> 원본
<br />
<img src="/assets/post_photo/opencv/어파인1.jpg" width="40%">
<br />
어파인 변환</b>
</div>

## 이동 변환

입력 영상의 모든 좌표를 x 방향으로 a, y 방향으로 b만큼 이동하는 수식은
x' = x + a
y' = y + b

행렬 M으로 변환하면
`[x'] = [1 0][x] + [a]`
`[y'] = [0 1][y] + [b]`

```
In :  src = cv2.imread('./data/tekapo.bmp')

      a = 150
      b = 100

      # x = a / y = b
      M = np.array([[1,0,a],
                    [0,1,b]], dtype = np.float32)

      dst = cv2.warpAffine(src, M, (0,0))

      cv2.imshow('src',src)
      cv2.imshow('dst',dst)
      cv2.waitKey()
      cv2.destroyAllWindows()
```
<div style="text-align:center;">
<img src="/assets/post_photo/opencv/어파인.jpg" width="40%">
<br />
<b> 원본
<br />
<img src="/assets/post_photo/opencv/이동.jpg" width="40%">
<br />
이동 변환</b>
</div>

## 전단 변환
직사각형 형태의 영상을 한쪽 방향으로 밀어서 평행사변형 모양으로 변형되는 변환이며 층밀림 변환이라고도 한다.
